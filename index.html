<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fig Operations Manager</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <header>
        <h1>Fig Operations Manager</h1>
    </header>

    <!-- Top navigation tabs -->
    <nav class="tabs">
        <button class="tab-link" data-tab="dashboard">Dashboard</button>
        <button class="tab-link" data-tab="varieties">Varieties</button>
        <button class="tab-link" data-tab="lots">Lots</button>
        <button class="tab-link" data-tab="customers">Customers</button>
        <button class="tab-link" data-tab="orders">Orders</button>
        <button class="tab-link" data-tab="analytics">Analytics</button>
        <button class="tab-link" data-tab="settings">Settings</button>
    </nav>

    <main>
        <!-- Dashboard overview -->
        <section id="dashboard" class="tab-section">
            <h2>Dashboard</h2>
            <div id="dashboard-summary" class="metrics-container">
                <!-- Summary cards injected here -->
            </div>
        </section>

        <!-- Varieties management -->
        <section id="varieties" class="tab-section hidden">
            <h2>Varieties</h2>
            <div class="form-container" id="variety-form">
                <h3 id="variety-form-title">Add Variety</h3>
                <input type="hidden" id="variety-id">
                <div class="field-row">
                    <label for="variety-name">Name</label>
                    <input id="variety-name" type="text" required>
                </div>
                <div class="field-row">
                    <label for="variety-category">Category</label>
                    <input id="variety-category" type="text">
                </div>
                <div class="field-row">
                    <label for="variety-price">Price per unit</label>
                    <input id="variety-price" type="number" step="0.01" min="0">
                </div>
                <div class="field-row">
                    <label for="variety-description">Description</label>
                    <textarea id="variety-description" rows="2"></textarea>
                </div>
                <div class="form-actions">
                    <button id="variety-save" class="primary">Save</button>
                    <button id="variety-cancel" class="secondary hidden">Cancel</button>
                </div>
            </div>
            <table id="variety-table" class="data-table">
                <thead>
                    <tr><th>Name</th><th>Category</th><th>Price</th><th>Description</th><th>Actions</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Lots management -->
        <section id="lots" class="tab-section hidden">
            <h2>Lots</h2>
            <div class="form-container" id="lot-form">
                <h3 id="lot-form-title">Add Lot</h3>
                <input type="hidden" id="lot-id">
                <div class="field-row">
                    <label for="lot-variety">Variety</label>
                    <select id="lot-variety"></select>
                </div>
                <div class="field-row">
                    <label for="lot-method">Propagation method</label>
                    <input id="lot-method" type="text" placeholder="e.g. short node, air-layer">
                </div>
                <div class="field-row">
                    <label for="lot-start">Start date</label>
                    <input id="lot-start" type="date">
                </div>
                <div class="field-row">
                    <label for="lot-end">End/rooting date</label>
                    <input id="lot-end" type="date">
                </div>
                <div class="field-row">
                    <label for="lot-cuttings">Cuttings</label>
                    <input id="lot-cuttings" type="number" min="1">
                </div>
                <div class="field-row">
                    <label for="lot-rooted">Rooted cuttings</label>
                    <input id="lot-rooted" type="number" min="0">
                </div>
                <div class="field-row">
                    <label for="lot-mix">Mix/media</label>
                    <input id="lot-mix" type="text" placeholder="e.g. perlite:peat:olive waste">
                </div>
                <div class="field-row">
                    <label for="lot-status">Status</label>
                    <input id="lot-status" type="text" placeholder="e.g. active, completed">
                </div>
                <div class="field-row">
                    <label for="lot-notes">Notes</label>
                    <textarea id="lot-notes" rows="2"></textarea>
                </div>
                <div class="form-actions">
                    <button id="lot-save" class="primary">Save</button>
                    <button id="lot-cancel" class="secondary hidden">Cancel</button>
                </div>
            </div>
            <table id="lot-table" class="data-table">
                <thead>
                    <tr><th>ID</th><th>Variety</th><th>Method</th><th>Start</th><th>End</th><th>Cuttings</th><th>Rooted</th><th>Success %</th><th>Status</th><th>Actions</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Customers management -->
        <section id="customers" class="tab-section hidden">
            <h2>Customers</h2>
            <div class="form-container" id="customer-form">
                <h3 id="customer-form-title">Add Customer</h3>
                <input type="hidden" id="customer-id">
                <div class="field-row">
                    <label for="customer-name">Name</label>
                    <input id="customer-name" type="text" required>
                </div>
                <div class="field-row">
                    <label for="customer-phone">Phone</label>
                    <input id="customer-phone" type="tel">
                </div>
                <div class="field-row">
                    <label for="customer-address">Address</label>
                    <input id="customer-address" type="text">
                </div>
                <div class="field-row">
                    <label for="customer-note">Note</label>
                    <textarea id="customer-note" rows="2"></textarea>
                </div>
                <div class="form-actions">
                    <button id="customer-save" class="primary">Save</button>
                    <button id="customer-cancel" class="secondary hidden">Cancel</button>
                </div>
            </div>
            <table id="customer-table" class="data-table">
                <thead>
                    <tr><th>Name</th><th>Phone</th><th>Address</th><th>Note</th><th>Actions</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Orders management -->
        <section id="orders" class="tab-section hidden">
            <h2>Orders</h2>
            <div class="form-container" id="order-form">
                <h3 id="order-form-title">Add Order</h3>
                <input type="hidden" id="order-id">
                <div class="field-row">
                    <label for="order-date">Date</label>
                    <input id="order-date" type="date">
                </div>
                <div class="field-row">
                    <label for="order-customer">Customer</label>
                    <select id="order-customer"></select>
                </div>
                <div id="order-items-container" class="items-container">
                    <h4>Items</h4>
                    <table id="order-items-table" class="items-table">
                        <thead>
                            <tr><th>Variety</th><th>Quantity</th><th>Unit price</th><th>Subtotal</th><th>Remove</th></tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <button id="add-item" type="button">Add Item</button>
                </div>
                <div class="field-row">
                    <label>Total</label>
                    <span id="order-total">0.00</span>
                </div>
                <div class="field-row">
                    <label for="order-status">Status</label>
                    <input id="order-status" type="text" placeholder="e.g. pending, delivered">
                </div>
                <div class="field-row">
                    <label for="order-note">Note</label>
                    <textarea id="order-note" rows="2"></textarea>
                </div>
                <div class="form-actions">
                    <button id="order-save" class="primary">Save</button>
                    <button id="order-cancel" class="secondary hidden">Cancel</button>
                </div>
            </div>
            <table id="order-table" class="data-table">
                <thead>
                    <tr><th>ID</th><th>Date</th><th>Customer</th><th>Items</th><th>Total</th><th>Status</th><th>Actions</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </section>

        <!-- Analytics view -->
        <section id="analytics" class="tab-section hidden">
            <h2>Analytics</h2>
            <div id="analytics-content" class="analytics-container">
                <!-- Charts and metrics injected here -->
            </div>
        </section>

        <!-- Settings view -->
        <section id="settings" class="tab-section hidden">
            <h2>Settings</h2>
            <div class="form-container" id="settings-form">
                <div class="field-row">
                    <label for="gh-owner">GitHub Owner/User</label>
                    <input id="gh-owner" type="text" placeholder="e.g. my-user">
                </div>
                <div class="field-row">
                    <label for="gh-repo">Repository</label>
                    <input id="gh-repo" type="text" placeholder="e.g. fig-ops">
                </div>
                <div class="field-row">
                    <label for="gh-branch">Branch</label>
                    <input id="gh-branch" type="text" value="main">
                </div>
                <div class="field-row">
                    <label for="gh-token">Personal Access Token</label>
                    <input id="gh-token" type="password" autocomplete="new-password">
                </div>
                <div class="form-actions">
                    <button id="settings-save" class="primary">Save Settings</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Main JS entrypoint -->
    <script type="module" src="modules/app.js"></script>
</body>
</html>